// ---------------------------------------------------------------------------
// extern int32 fsize( FILE* d )
// ---------------------------------------------------------------------------
#include <os_syscall.h>
#include <rts.h>
// ---------------------------------------------------------------------------
int32 fsize( FILE* d )
{
  int64 size;
  if( d == NULL ) return -3;
  if( drv_ioctl( d->rid, IOC_SIZE, &size ) != OSE_OK ) return -1;
  if( size >= 2147483648ull ) return -2;
  return (int32)size;
}
// ---------------------------------------------------------------------------
